<!DOCTYPE html5>
<html>
	<head>
		<title>keypad | Holiday Hack 2019</title>
		<link rel="stylesheet" href="/css/common.css">
		<link rel="stylesheet" href="/css/writeup.css">
		<link rel="stylesheet" href="/css/pygments.css">
		<link rel="stylesheet" href="https://unpkg.com/normalize.css@8.0.1/normalize.css">
		
		<meta charset="utf-8" />
	</head>
	<body>
		<main>
			<h1>Frosty Keypad</h1>
<p>Just by looking at the keypad we can tell the numbers that are used regularly are 1, 3 and 7. And no, <code>1337</code> doesn't work.</p>
<p>We're also told:
  - One digit is repeated once
  - The code is a prime number</p>
<p>From the first clue, our code is some combination of <code>{1,3,7,3}, {1,3,7,1}, {1,3,7,7}</code>. This means our keyspace is all permutations of these 3 sets unioned (concatenated). We'll also filter out the duplicates:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">permutations</span>

<span class="c1"># Union</span>
<span class="n">keyspace</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">keyspace</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
<span class="n">keyspace</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="n">keyspace</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">]))</span>

<span class="c1"># Filter unique and make them numbers while we&#39;re at it</span>
<span class="n">keyspace</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">x</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">keyspace</span><span class="p">)</span> <span class="k">if</span> <span class="n">keyspace</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">keyspace</span><span class="p">))</span> <span class="c1"># 36</span>
<span class="nb">print</span><span class="p">(</span><span class="n">keyspace</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># 1371 (int)</span>
</pre></div>


<p>36 is reasonable, but still a bit much to brute-force. Luckily, we can still filter out some using the second clue:</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="n">keyspace</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">keyspace</span> <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">keyspace</span><span class="p">)</span> <span class="c1"># [1373, 1733, 3137, 3371, 7331]</span>
</pre></div>


<p>Since they're all pretty small numbers, we don't care about the terrible performance of our is_prime implementation, especially since I was doing this mostly from the REPL. Now we know there's only 5 combinations our code could possibly be, which is very easy to just manually check each one. </p>
<p>The answer is 7331.</p>
		</main>

		<footer>
			<div class="links">
				<div>
					<a aria-label="Back" href="index.html">
						<span class="iconify" data-icon="fa:arrow-left"></span>
					</a>
				</div>
				<div>
			</div>
		</footer>

		<script src="https://code.iconify.design/1/1.0.3/iconify.min.js"></script>
	</body>
</html>